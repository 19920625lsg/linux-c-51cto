# 6. 声明的作用

## 6.1 变量的声明
拓宽变量的作用域。  
如果没有通过声明来拓宽变量作用域的话，在第二阶段编译时，编译器就会提示你所使用的某个符号找不到，有了声明后，其实就是告诉编译器，你所使用的这符号是由定义，不要报错。  

## 6.2 函数的声明
### （1）拓宽函数的作用域

### （2）进行形参、返回值的类型检查

#### 1）如果函数的定义位置在调用位置之前时
此时函数定义本身就是一个函数声明，无需额外的声明。  
编译阶段进行函数的类型检查时，直接通过函数定义来进行类型检查。  

#### 2）如果函数定义的位置不在调用位置之前
如果不进行声明的话，编译时是不会进行类型检查的，所以我们必须进行声明，声明后再进行编译时，就会通过声明来进行函数的类型检查。

#### 3）类型检查有什么用
类型检查其实很有用，进行类型检查时如果发现类型有问题的话，编译时打印提示信息，这样可以帮助我们更好的排查函数错误。

例子：		
```c
int main(void)
{
    int a = 10;
    fun(100);
    return 0;
}
int fun(int *p)
{

}
```

+ 1）如果没有声明
只报函数没有声明的警告。  
尽管实参和形参类型明显不匹配，但是编译器并没有提示“类型有问题”，因为没有做类型检查。  

+ 2）如果加上声明
编译时就会通过声明进行类型的检查，然后报实参和形参类型不匹配的警告，这个信息可以帮助我们排查函数的类型错误。

### （3）不进行函数声明，编译可以通过吗？

如果函数定义本来就在函数调用位置的前面，定义本身就是声明，编译肯定能过。  

但是如果函数定义不在调用位置的前面，而且还没有给额外的声明，编译还能过吗？  

这要看编译器的严格程度，有可能编译通过，但是有些严格编译器编译时不能通过。  

不过不管人家编译器严不严格，按照正规操作，我们必须要进行声明，如果不进行声明的话，编译时不会进行函数的类型检查，由于没有做类型检查，就算程序能够编译通过，而且还能运行，但是很有可能会出现因传参和返回值类型不对而导致的错误。  

### （4）调用库函数为什么需要进行声明

比如在程序中调用printf时，必须在.c中包含stdio.h头文件，因为这里面有printf函数的声明。  

对库函数进行声明，函数声明的目的是一样的。  

一是为了拓展作用域，二是为了进行参数检查，与我们前面所举例子的唯一不同是，库函数时别人帮我们写好。  


如果调用的函数不在本文件中，而在其它的文件中，比如  
+  在我自己写的其它.c中
+  在库文件中

除了要对函数进行声明外，还必须链接函数所在的文件，函数声明的只用于“作用域的拓展”和类型检查，第四阶段链接时，必须要链接函数所在的文件。  

只有在链接了函数所在文件后，在链阶段进行声明和定义的全局符号统一时，你才能在链接文件中找到全局函数的定义，不然链接时会报该函数没有定义的错误。  

```c
a.c    
extern fun();

int main()
{
	fun();
}
```

```c
b.c 
int fun()
{

}
```

`gcc a.c `





