# 3. 逗号表达式

## 3.1 逗号表达式的语法

直接通过例子来介绍。

```c
int a = 10;
int b = 20;
int c;

c = (a+10, b=a+100, sin(b)); 
```

其中a+10, b=a+100, sin(b)为逗号表达式：
+  逗号表达式的计算顺序为**从左到右**，依次进行。
+  整个逗号表达式的值为**最后一表达式的值**，所c中放的为sin(b)的计算结果。

当然并不是所有有,的地方都是逗号表达式，比如实参、形参的间隔就有逗号，但是并不是逗号表达式  
	
## 3.2 `c = (a+10, b=a+100, sin(b)) 与 c=a+10, b=a+100, sin(b)`

### （1） c = (a+10, b=a+100, sin(b))

整个表达式为赋值语句  
左值：变量c  
右值：逗号表达式(a+10, b=a+100, sin(b))  

整个逗号表达式的值为sin(b)，c中放的是sin(b)的结果  

### （2） `c=a+10, b=a+100, sin(b)`

整个就是一个逗号表达式，整个逗号表达式的值为sin(b)，不过在这里整个逗号表达式的值并没有意义。

## 3.3 逗号表达式的意义 

实际上从我们前面所举的例子来看，逗号表达式并没有什么实际的意义。
	
事实上逗号表达式的使用场合也确实不多，可以说“逗号表达式”纯粹就是为了在只能写一条表达式的地方写多几条表达式而设计的，**用得最多的地方就是for**

**for( ; ; )**
在()只能有两个; ，如果需要在for的()中多添加表达式的话，只能使用逗号表达式来实现，比如

```c
for(i=0,j=SIZE-1; i<j; ++i,--j) 
{

}
```

`i=0,j=SIZE-1`和`++i,--j`就是逗号表达式，在for中使用逗号表达式的目的，就是为了多写几个表达式，“逗号表达式”的整体值在for中并无意义

所以说在c中，逗号表达式唯一的用途基本就是用在for循环中，给for多添加几个“自变量”

疑问：在for循环中多指定几个自变量有意义吗?  
答：当然有，举个例子，判断某个单词是不是一个“回文单词”。  什么是回文，比如 civic, dad, deed, deified都是回文  

判断回文时，在for中使用i/j两个自变量来同时操作是最方便的，当然使用一个自变量也行，但是会不如两个方便，  
示例代码如下：  

```c
#include <stdio.h>
#include <string.h>

int main(void)
{
    int flag = 0, i=0, j=0;
    char word[] = "deified";

    for(i=0, j=strlen(word)-1; i<j; i++, j--)
    {
        if(word[i] != word[j])
        {
            flag++; //记录不相等字符的个数
        }
    }

    if(flag == 0) printf("是回文\n");
    else          printf("不是回文\n");

    return 0;
}
```
