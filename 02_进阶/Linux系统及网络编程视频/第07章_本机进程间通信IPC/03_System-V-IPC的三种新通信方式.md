# 3. System V IPC 的三种新通信方式

## 3.1 有关System V IPC

### （1）什么是System V IPC

前面讲的无名管道和有名管道，都是UNIX系统早期提供的比较原始的一种进程间通信（IPC）方式，

早到Unix系统设计之初就有了。

后来Unix系统升级到第5版本时，又提供了三种新的IPC通信方式，分别是：

+ 消息队列
+ 共享内存
+ 信号量

**System V就是系统第5版本的意思**  
后来的Linux也继承了unix的这三个通信方式，Unix是非常早期的而且非常优秀OS，所以其它os也借鉴了这三种的System V IPC

### （2）System V IPC的特点

#### 1）管道(原始IPC)

管道的本质就是一段缓存，不过Linux OS内核是以文件的形式来管理的，所以我们操作管道时，不管是无名管道，还是有名管道，我们都是使用文件描述符以文件的形式来操作的。

所以我们操作管道时，除了pipe和mkfifo这两个函数外，其它的像read、write、open都是我们第1章所学的文件io函数，所以大家在学习管道时，会觉得比较容易。

#### 2）System V IPC

System V IPC与管道有所不同，它完全使用了不同的实现机制，**与文件没任何的关系，也就是说内核不再以文件的形式来管理System V IPC，所以不能再使用文件的方式来操作**

对于System V IPC，OS内核提供了全新的API，对于这些API来说，我们的要求是理解而不是记忆，因为在以后的开发中，确实用的不多。就算真的用到了，只要你理解了，你自然能够很快的用起来。

#### 3）使用System V IPC时，`不存在亲缘进程一说`

> 任何进程之间通信时，都可以使用System V IPC来通信, 不存在亲缘进程一说

### （3）System V IPC标识符

我们前面说过，System V IPC不再以文件的形式存在，因此没有文件描述符这个东西，但是它有类似的“标识符”。

你完全可以认为这个“标识符”就是文件描述符的替代者，但是它是专门给System V IPC使用的，所以我们不能使用文件IO函数来操作“标识符”，只能使用System V IPC的特有API才能操作。

#### 1）怎么才能得到这个“表示符”

调用某API创建好某个“通信结构”以后，API就会返回一个唯一的“标识符”。

比如创建好了一个“消息队列”后，创建的API就会返回一个唯一标识消息队列的“标识符”。

#### 2）System V IPC标识符的作用？

比如，如果创建的是消息队列的话，进程通过消息队列唯一的标识符，就能找到创建好的“消息队列”，使用这个消息队列，进程就能读写数据，然后实现进程间通信。